<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Interviewer</title>

    <!-- jsPDF (para generar el PDF en el navegador) -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

    <style>
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        margin: 0;
        background: #0b1220;
        color: #e8eefc;
      }
      .wrap {
        max-width: 900px;
        margin: 0 auto;
        padding: 40px 20px;
      }
      .card {
        background: rgba(255,255,255,0.06);
        border: 1px solid rgba(255,255,255,0.12);
        border-radius: 16px;
        padding: 22px;
      }
      h1 { margin: 0 0 8px; font-size: 28px; }
      p { margin: 0 0 14px; color: rgba(232,238,252,0.85); line-height: 1.4; }
      .steps { margin-top: 14px; padding-left: 18px; color: rgba(232,238,252,0.85); }
      .badge {
        display: inline-block;
        font-size: 12px;
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(99,102,241,0.18);
        border: 1px solid rgba(99,102,241,0.35);
        margin-bottom: 12px;
      }
      .footer { margin-top: 18px; font-size: 12px; color: rgba(232,238,252,0.6); }
    </style>
  </head>

  <body>
    <div class="wrap">
      <div class="badge">Gratis Â· Sin registro</div>

      <div class="card">
        <h1>Simulador de entrevista</h1>
        <p>
          Practica entrevistas con un entrevistador IA. Responde con naturalidad,
          como si fuera una entrevista real.
        </p>

        <p><strong>CÃ³mo usarlo:</strong></p>
        <ol class="steps">
          <li>Abre el chat (abajo a la derecha).</li>
          <li>Escribe lo que te pide el bot (Nombre, Empresa, Puesto, Seniority).</li>
          <li>Contesta las preguntas.</li>
          <li>Al final recibirÃ¡s el cierre y podrÃ¡s descargar tu informe.</li>
        </ol>

        <div class="footer">
          Tip: responde con ejemplos concretos (situaciÃ³n â†’ acciÃ³n â†’ resultado).
        </div>
      </div>
    </div>

    <!-- Voiceflow + descarga de PDF -->
    <script type="text/javascript">
      (function (d, t) {
        var v = d.createElement(t), s = d.getElementsByTagName(t)[0];

        v.onload = function () {

          // ðŸ”½ EXTENSIÃ“N PARA DESCARGAR EL PDF
          const DownloadReportExtension = {
            name: "download_report_pdf",
            type: "effect",

            match: ({ trace }) =>
              trace?.type === "custom_action" &&
              trace?.payload?.name === "DOWNLOAD_REPORT_PDF",

            effect: ({ trace }) => {
              const payload = trace.payload.payload || {};

              const reportText = payload.report_text || "";
              const candidate = payload.candidate_name || "Candidate";
              const company = payload.company || "Company";
              const role = payload.role || "Role";

              const { jsPDF } = window.jspdf;
              const doc = new jsPDF({ unit: "pt", format: "a4" });

              const marginX = 40;
              let y = 50;

              doc.setFont("helvetica", "bold");
              doc.setFontSize(16);
              doc.text("HR Evaluation Report", marginX, y);

              y += 20;
              doc.setFont("helvetica", "normal");
              doc.setFontSize(11);
              doc.text(`${candidate} â€” ${role} @ ${company}`, marginX, y);

              y += 30;
              doc.setFontSize(10);
              const lines = doc.splitTextToSize(reportText, 515);
              doc.text(lines, marginX, y);

              const safe = (s) => String(s).replace(/[^\w]+/g, "_");
              const filename = `Interview_Report_${safe(candidate)}_${safe(company)}.pdf`;

              doc.save(filename);
            }
          };

          // ðŸ”½ CARGA DEL CHAT DE VOICEFLOW
          window.voiceflow.chat.load({
            verify: { projectID: "6981de99392d1c3e0b9084bf" },
            url: "https://general-runtime.voiceflow.com",
            versionID: "production",
            voice: {
              url: "https://runtime-api.voiceflow.com"
            },
            assistant: {
              extensions: [DownloadReportExtension]
            }
          });
        };

        v.src = "https://cdn.voiceflow.com/widget-next/bundle.mjs";
        v.type = "text/javascript";
        s.parentNode.insertBefore(v, s);
      })(document, "script");
    </script>

  </body>
</html>
